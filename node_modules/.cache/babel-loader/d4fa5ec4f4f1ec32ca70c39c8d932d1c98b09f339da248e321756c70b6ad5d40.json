{"ast":null,"code":"import _slicedToArray from\"/media/etienne/data/work/L3/S5/Cloud/Projets/vente-aux-encheres/react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{url}from'./url.js';import\"./Stats.css\";import React,{useState,useEffect}from'react';import SideBar from\"./SideBar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function valider(idClient,budget,demande){var xhr=new XMLHttpRequest();var form=new FormData();form.append(\"idClient\",idClient);form.append(\"budget\",budget);form.append(\"demande\",demande);xhr.onreadystatechange=function(){console.log(this.status);if(this.readyState===4&&this.status===200){var response=this.responseText;if(response!=0){alert(\"Demande accepté !\");window.location.reload();}else{alert(\"Une erreur inattendue s'est produite !\");}}};xhr.open(\"POST\",url+\"updatebudget\",true);xhr.send(form);}function Validation(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listeDemandes=_useState2[0],setlisteDemandes=_useState2[1];useEffect(function(){fetch(url+'listedemande').then(function(response){return response.json();}).then(function(data){return setlisteDemandes(data);});},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"Validation\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Liste des rechargements de compte\"}),/*#__PURE__*/_jsx(\"div\",{class:\"tabG\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nom Client\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Budget\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Demande\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]}),listeDemandes.map(function(demande){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{\"data-idClient\":demande.idClient,children:demande.idClient}),/*#__PURE__*/_jsx(\"td\",{children:demande.nom}),/*#__PURE__*/_jsx(\"td\",{children:demande.budget}),/*#__PURE__*/_jsx(\"td\",{children:demande.demande}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return valider(demande.idClient,demande.budget,demande.demande);},children:\"Valider\"})})]});}),/*#__PURE__*/_jsx(\"tr\",{})]})})]});}export default Validation;","map":{"version":3,"names":["url","React","useState","useEffect","SideBar","valider","idClient","budget","demande","xhr","XMLHttpRequest","form","FormData","append","onreadystatechange","console","log","status","readyState","response","responseText","alert","window","location","reload","open","send","Validation","listeDemandes","setlisteDemandes","fetch","then","json","data","map","nom"],"sources":["/media/etienne/data/work/L3/S5/Cloud/Projets/vente-aux-encheres/react-app/src/validation-rechargement.js"],"sourcesContent":["import { url } from './url.js';\nimport \"./Stats.css\";\nimport React, { useState, useEffect } from 'react';\n\n\nimport SideBar from \"./SideBar\";\nfunction valider(idClient , budget , demande) {\n    let xhr = new XMLHttpRequest()\n    let form = new FormData()\n    form.append(\"idClient\" , idClient)\n    form.append(\"budget\" , budget)\n    form.append(\"demande\" , demande)\n    xhr.onreadystatechange = function () {\n        console.log(this.status)\n        if(this.readyState === 4 && this.status === 200){\n            let response = this.responseText;\n            if(response != 0){\n                alert(\"Demande accepté !\")\n                window.location.reload()\n            }else{\n                alert(\"Une erreur inattendue s'est produite !\")\n            }\n        }\n    };\n    xhr.open(\"POST\", url+\"updatebudget\", true);\n    xhr.send(form);\n}\n\nfunction Validation() {\n    const [listeDemandes, setlisteDemandes] = useState([])\n    useEffect(() => {\n        fetch(url + 'listedemande')\n            .then((response) => response.json())\n            .then((data) => setlisteDemandes(data))\n    }, []);\n    return (\n        <div className=\"Validation\">\n            <SideBar />\n            <h1>Liste des rechargements de compte</h1>\n            <div class=\"tabG\">\n                <table>\n                    <tr>\n                        <th>Id</th>\n                        <th>Nom Client</th>\n                        <th>Budget</th>\n                        <th>Demande</th>\n                        <th>Action</th>\n                    </tr>\n                    {listeDemandes.map((demande) => (\n                        <tr>\n                            <td data-idClient={demande.idClient}>{demande.idClient}</td>\n                            <td>{demande.nom}</td>\n                            <td>{demande.budget}</td>\n                            <td>{demande.demande}</td>\n                            <td><button onClick={() => valider(demande.idClient , demande.budget , demande.demande)}>Valider</button></td>\n                        </tr>\n                    )\n\n                    )}\n\n                    <tr>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    );\n}\n\nexport default Validation"],"mappings":"+JAAA,OAASA,GAAG,KAAQ,UAAU,CAC9B,MAAO,aAAa,CACpB,MAAOC,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAGlD,MAAOC,QAAO,KAAM,WAAW,CAAC,wFAChC,QAASC,QAAO,CAACC,QAAQ,CAAGC,MAAM,CAAGC,OAAO,CAAE,CAC1C,GAAIC,IAAG,CAAG,GAAIC,eAAc,EAAE,CAC9B,GAAIC,KAAI,CAAG,GAAIC,SAAQ,EAAE,CACzBD,IAAI,CAACE,MAAM,CAAC,UAAU,CAAGP,QAAQ,CAAC,CAClCK,IAAI,CAACE,MAAM,CAAC,QAAQ,CAAGN,MAAM,CAAC,CAC9BI,IAAI,CAACE,MAAM,CAAC,SAAS,CAAGL,OAAO,CAAC,CAChCC,GAAG,CAACK,kBAAkB,CAAG,UAAY,CACjCC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACC,MAAM,CAAC,CACxB,GAAG,IAAI,CAACC,UAAU,GAAK,CAAC,EAAI,IAAI,CAACD,MAAM,GAAK,GAAG,CAAC,CAC5C,GAAIE,SAAQ,CAAG,IAAI,CAACC,YAAY,CAChC,GAAGD,QAAQ,EAAI,CAAC,CAAC,CACbE,KAAK,CAAC,mBAAmB,CAAC,CAC1BC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CAC5B,CAAC,IAAI,CACDH,KAAK,CAAC,wCAAwC,CAAC,CACnD,CACJ,CACJ,CAAC,CACDZ,GAAG,CAACgB,IAAI,CAAC,MAAM,CAAEzB,GAAG,CAAC,cAAc,CAAE,IAAI,CAAC,CAC1CS,GAAG,CAACiB,IAAI,CAACf,IAAI,CAAC,CAClB,CAEA,QAASgB,WAAU,EAAG,CAClB,cAA0CzB,QAAQ,CAAC,EAAE,CAAC,wCAA/C0B,aAAa,eAAEC,gBAAgB,eACtC1B,SAAS,CAAC,UAAM,CACZ2B,KAAK,CAAC9B,GAAG,CAAG,cAAc,CAAC,CACtB+B,IAAI,CAAC,SAACZ,QAAQ,QAAKA,SAAQ,CAACa,IAAI,EAAE,GAAC,CACnCD,IAAI,CAAC,SAACE,IAAI,QAAKJ,iBAAgB,CAACI,IAAI,CAAC,GAAC,CAC/C,CAAC,CAAE,EAAE,CAAC,CACN,mBACI,aAAK,SAAS,CAAC,YAAY,wBACvB,KAAC,OAAO,IAAG,cACX,oBAAI,mCAAiC,EAAK,cAC1C,YAAK,KAAK,CAAC,MAAM,uBACb,sCACI,mCACI,oBAAI,IAAE,EAAK,cACX,oBAAI,YAAU,EAAK,cACnB,oBAAI,QAAM,EAAK,cACf,oBAAI,SAAO,EAAK,cAChB,oBAAI,QAAM,EAAK,GACd,CACJL,aAAa,CAACM,GAAG,CAAC,SAAC1B,OAAO,qBACvB,mCACI,WAAI,gBAAeA,OAAO,CAACF,QAAS,UAAEE,OAAO,CAACF,QAAQ,EAAM,cAC5D,oBAAKE,OAAO,CAAC2B,GAAG,EAAM,cACtB,oBAAK3B,OAAO,CAACD,MAAM,EAAM,cACzB,oBAAKC,OAAO,CAACA,OAAO,EAAM,cAC1B,iCAAI,eAAQ,OAAO,CAAE,yBAAMH,QAAO,CAACG,OAAO,CAACF,QAAQ,CAAGE,OAAO,CAACD,MAAM,CAAGC,OAAO,CAACA,OAAO,CAAC,EAAC,UAAC,SAAO,EAAS,EAAK,GAC7G,EACR,CAEA,cAED,aACK,GACD,EACN,GACJ,CAEd,CAEA,cAAemB,WAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}